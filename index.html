<!DOCTYPE html>
  <html>
    <head>
        <meta charset="UTF-8">
        <title>Notepadz</title>
        <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
        <style>
            body {
                margin: 0;
                padding: 0;
                font-family: 'Lato', sans-serif;
            }
            textarea { 
                resize: none;
                border: none;
                font-family: 'Lato', sans-serif;
            }
        </style>
    </head>
    <body>
        <textarea cols="109" autofocus rows="25" id="text"></textarea>
        <input type="text" placeholder="File Name" id="filename">
        <br />
        <button id="download">Download File</button>

        <script>
            const { ipcRenderer } = require("electron");

            function download(text, filename) {
                let el = document.createElement("a");
                el.setAttribute("href", "data:text/plain;charset=utf-8," + encodeURIComponent(text))
                el.setAttribute("download", filename);

                el.style.display = "none";
                document.body.appendChild(el);

                el.click();

                el.body.removeChild(el);
            }

            document.querySelector("#download").addEventListener("click", () => {
                let text = document.querySelector("#text").value;
                let filename = document.querySelector("#filename").value;

                download(text, filename);
            })
            
            ipcRenderer.on("changeColor", (event, data) => {
                console.log(data)
                document.querySelector("#text").style.color = data.color;
            })

        </script>
    </body>

</html>